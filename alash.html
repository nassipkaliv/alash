<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/alashstyle.css">
    <link href="https://fonts.googleapis.com/css?family=Kaushan+Script|Montserrat:300i,400,700&amp;subset=cyrillic-ext" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
     <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
    <script src="https://use.fontawesome.com/d46373b17c.js"></script>
    <title>Alash</title>
</head>
<body>


<header class="header" id="header">
    <div class="container">
        <div class="header__inner">
            <div class="header__logo" data-scroll="#intro">Batys-Alash</div>

            <nav class="nav" id="nav">
                <a class="nav__link" href="alash.html" data-section="home">Basty</a>
                <a class="nav__link" href="#members" data-section="history">Tarikhi</a>
                <a class="nav__link" href="members.html" data-section="members">Okilderi</a>
                <a class="nav__link" href="legacy.html" data-section="musei">Musei</a>
            </nav>

        </div>
    </div>
</header>


<div class="page">

    <!-- Intro -->
    <div class="intro" id="basty">
        <div class="container">
            <div class="intro__inner"> 
                <h1 class="intro__title">Batys Alash</h1>

                <a class="btnintro" href="https://www.youtube.com/watch?v=NH3Q0-8fa18">Tagida oky</a>
            </div>
        </div>


    </div><!-- /.intro -->


    <!-- HISTORY -->

    <section class="section" id="history">
        <div class="container">

            <div class="section__header">
                <h3 class="section__suptitle">Bolimder</h3>
                <h2 class="section__title">Batys Alash-Orda tarikh</h2>
            </div>

                <p>Алашорда үкіметінің батыс қанаты – Күнбатыс Алашордасының орталығы болған Жымпиты селосында Алаш тарихымен байланысты бірнеше ғимарат сақталған. Оның бірі – Күнбатыс Алашорданың кеңсесі, екіншісі – ХІХ ғасырға тиесілі мұсылмандар мешіті. Алаш жұрты азаттыққа қол созған 1917-1918 жылдары Алашорданың батыс қанаты ең ұзақ: 19 ай – 578 күн бойы өмір сүрген. Бүгінде Жымпиты ауылында Алаш аллеясы, Алашорда музейі жұмыс істейді.</p>
        </div>

                <section class="cd-horizontal-timeline">
    <div class="timeline">
        <div class="events-wrapper">
            <div class="events">
                <ol>
                    <li><a href="#0" data-date="14/06/2016" class="selected">1905</a></li>
                    <li><a href="#0" data-date="21/06/2016">1911</a></li>
                    <li><a href="#0" data-date="24/06/2016">Sil,1917</a></li>
                    <li><a href="#0" data-date="30/06/2016">21Qar,1917</a></li>
                    <li><a href="#0" data-date="08/07/2016">Jel,1917</a></li>
                    <li><a href="#0" data-date="17/07/2016">11Qır,1918</a></li>
                    <li><a href="#0" data-date="23/07/2016">Jel,1919</a></li>
                    <li><a href="#0" data-date="30/07/2016">Nay,1920</a></li>
                    
                    
                </ol>

                <span class="filling-line" aria-hidden="true"></span>
            </div> <!-- .events -->
        </div> <!-- .events-wrapper -->
            
        <ul class="cd-timeline-navigation">
            <li><a href="#0" class="prev inactive">Prev</a></li>
            <li><a href="#0" class="next">Next</a></li>
        </ul> <!-- .cd-timeline-navigation -->
    </div> <!-- .timeline -->

    <div class="events-content">
        <ol>
            <li class="selected" data-date="14/06/2016">
                <h2>Alash Partyasi</h2>
                <em>1905</em>
                <p> 
                    Патша саясатына қарсы күресті 1-ші орыс революциясынан кейін Алаш қозғалысын құрған ұлт зиялылары басқарды. 1905 жылғы Қарқаралы петициясы Алаш қозғалысының бағдарламалық құжатына айналды. 1905 жылдың аяғында Оралда Қазақстанның бес облысы өкілдерінің «делегат съезі» шақырылып, онда қазақтың ұлттық партиясын құру туралы алдын ала шешім қабылданып, оның негізінде кейін «Алаш» партиясы пайда болды.
                </p>
            </li>

            <li data-date="21/06/2016">
                <h2>Qazaq qogaminin damui</h2>
                <em>1911</em>
                <p> 
                   Демократ ағартушылар Ә.Бөкейханов, А.Байтұрсынов және М.Шоқай қазақ қоғамын дамытудың жолдарын іздестірді, Мемлекеттік Думадағы мұсылман фракциясының жұмысын басқарды. Олардың бастамасымен «Хайқап» журналы (1911), «Бірлік туы», «Сары-арқа», «Ақ жол» газеттері құрылып, өз беттерінде үлкен үгіт-насихат, тәрбие жұмыстарын жүргізді.
                </p>
            </li>

            <li data-date="24/06/2016">
                <h2>I Zhalpiqazaq sezi</h2>
                <em>21-28 silde, 1917</em>
                <p> 
                    1917 жылы 21-28 шілдеде Орынборда өткен Бірінші жалпықазақ съезінде «Алаш» партиясы ұйымдастырылды. Сол съезде 14 мәселе бойынша шешімдер қабылданды, оның ішінде Ресейдегі, Қазақ облыстары республикасындағы басқару нысаны, қазақ халқының жерге орналастыруы, дінге көзқарасы, қазақ әйелдерінің жағдайы, қазақ әйелдерінің жағдайы, 2009-2011 жылдар аралығындағы қазақтардың жер-су мәселесі сияқты негізгі мәселелер. Құрылтай жиналысына сайлауды дайындау.
                </p>
            </li>

            <li data-date="30/06/2016">
                <h2>"QAZAQ" gazeti</h2>
                <em>21 qarasha, 1917</em>
                <p> 
                   Проект программы состоял из десяти пунктов: государственное устройство, местная свобода, основное право, религия, власть и суд, защита народа, налоги, рабочий вопрос, развитие науки и просвещения, земельный вопрос. Целью партии «Алаш» стало воссоздание национального государства казахов, распавшегося в XVIII-ХІХ веках, введение института президентства. 
                </p>


                <p>1917 жылы қарашада өткен Құрылтай жиналысына сайлауда «Алаш» партиясы көпшілік дауыс пен 43 мандатқа ие болды. Құрылтай жиналысына сайлауда алған дауыстар саны бойынша (262 404 дауыс) «Алаш» Қазан төңкерісі қарсаңында Ресейде болған елу партияның ішінде 8-ші орынды иеленді.</p>
            </li>


            <li data-date="08/07/2016">
                <h2>Alash avtonomyasi</h2>
                <em>5-13 jeltoqsan, 1917</em>
                <p>
                    1917 жылы 5-13 желтоқсанда "II Жалпықазақ съезінде" Алаш автономиясы мен Алашорда үкіметін құру жөнінде шешім қабылданады.
                </p>
                <p>Орынбор қаласындағы жалпықазақ съезінде Алаш автономисынын бағдарламасы шығарылды.</p>
            </li>

            <li data-date="17/07/2016">
                <h2>Batys Alash avtonomiyasi</h2>
                <em>11 qirquyek, 1917</em>
                <p> 
                    Алашорданың Батыс бөлімшесін кұру туралы шешімге Ә. Бөкейханов 1918 ж. 11 қыркүйекте қол қойды. Бұл шешімді Ә. Бөкейханов Уфа қаласында өткен және У. Танашев, X. Досмұхамедов, Ж. Досмұхамедов, А. Бірімжанов, Ә. Ермеков және М. Тынышбаев қатынасқан мәжілістің келісімі бойынша жасады. 
                </p>
                <p>Алашорданың Батыс бөлімшесінің төрағасы болып Жанша Досмұхамедов тағайындалды.</p>
                <p>Алашорданың Батыс бөлімшесі құрылуына байланысты Ойыл уәлаятының үкіметі таратылып, оған осы кезге дейін бағынып келген Батыс Қазақстанның қазақтар мекендеген жерлері аталған бөлімшенің қарамағына берілді.</p>
            </li>

            <li data-date="23/07/2016">
                <h2>Batys Alash avtonomiyasinin zhoyilui</h2>
                <em>Jeltoqsan 1919</em>
                <p> 
                    Азамат соғысындағы күштердің ара салмағы шешуші түрде Қызыл Армия жағына ауысқан жағдайда, 1919 ж. желтоқсанда, Алашорданың Батыс бөлімшесі Кеңес өкіметі алдында бас июге мәжбүр болды.
                </p>
            </li>

            <li data-date="30/07/2016">
                <h2>Alash-Orda zhoyilui</h2>
                <em>5 Nayryz, 1920</em>
                <p>
                    Кеңес үкіметінің қысымына шыдай алмай, 1920 жылы Алаш Орда жойылады.
                </p>
            </li>

            
        </ol>
    </div> <!-- .events-content -->

</section>

<main>
<h2>BATYS ALASH-ORDA BAPTARY</h2>
  <ol class="gradient-list">
    <li><p>Алашорда Алаш автономиясы аумағындағы бірден-бір басқару органы болып табылады.</p></li>
    <li><p>Жергілікті басқару.</p></li>
    <li><p>Алашорданың комиссарлары арқылы жүзеге асырылады.</p></li>
    <li><p>Облыстық, уездік комиссарларды Алашорда тағайындайды.</p></li>
    <li><p>Құрамына Бөкей Ордасы, Ойыл өңрі, Закаспий облысының Маңғыстау уезі, Торғай облысының Ақтөбе және Ырғыз уездері кіретін Алаш автономиясының батыс бөлімшесін басқару үшін Алашорданын Батыс бөлімшесі кұрылды.</p></li>
    <li><p>Алашорданың осы бөлімшесі автономиянын көрсетілген бөлігін Алашордадан түсетін маңызды және принципті нұсқаулар негізінде басқарады.</li>
    <li><p>Төтенше жағдайлар болғанда және Алашордамен байланыстар үзілгенде бөлімше Алашорданың құқықтарына ие болады.</p></li>
  </ol>
</main>
    </section>


    <!-- MEMBERS -->
    <section class="section" id="members">
        <div class="container">

            <div class="section__header">
                <h3 class="section__suptitle">Bolimder</h3>
                <h2 class="section__title">Batys Alash-Orda okilderi</h2>
            </div>
                <main class="page-content">
    <div class="card">
        <div class="content">
            <h2 class="title">Jahanşa Dosmuxamedov</h2>
            <p class="copy">Алаш-Орда жетекшісі - Жаһанша Досмұхамедов.</p><a class="btn" href="members.html">kobirek...</a>
        </div>
    </div>
    <div class="card">
        <div class="content">
            <h2 class="title">Halel Dosmuxamedov</h2>
            <p class="copy">Халел Досмұхамедов - Алаш-Орда қайраткері.</p><a class="btn" href="members.html">kobirek...</a>
        </div>
    </div>
    <div class="card">
        <div class="content">
            <h2 class="title">Ualithan Tanashev</h2>
            <p class="copy">Уәлитхан Шарафиддинұлы Танашев — Алашорданың күрескер азаматы, заңгер, көрнекті қоғам қайраткері.</p><a class="btn" href="members.html">kobirek...</a>
        </div>
    </div>
    <div class="card">
        <div class="content">
            <h2 class="title">Zhankadamov Bizhangali</h2>
            <p class="copy">Жанқадамов Бижанғали - Батыс Алаш-Орда қайраткері.</p><a class="btn" href="members.html">kobirek...</a>
        </div>
    </div>
</main>
                    

            </div>

    </section>



    <!-- MUSEI -->
    <section class="section" id="musei">
        <div class="container">

            <div class="section__header">
                <h3 class="section__suptitle">Bolimder</h3>
                <h2 class="section__title">Batys Alash-Orda musei</h2>
            </div>
                <section class="hero-section">
                    <p>Алашорда үкіметінің батыс қанаты – Күнбатыс Алашордасының орталығы болған Жымпиты селосында Алаш тарихымен байланысты бірнеше ғимарат сақталған. Оның бірі – Күнбатыс Алашорданың кеңсесі, екіншісі – ХІХ ғасырға тиесілі мұсылмандар мешіті. Алаш жұрты азаттыққа қол созған 1917-1918 жылдары Алашорданың батыс қанаты ең ұзақ: 19 ай – 578 күн бойы өмір сүрген. Бүгінде Жымпиты ауылында Алаш аллеясы, Алашорда музейі жұмыс істейді.</p> 
                    
                    <p>    
                    Дәл осы жерде 1918 жылы Жақанша Досмұхаммедов басқарған Алаш-Орданың Батыс бөлімі құрылды. Мұражай сол кезеңнің атмосферасын егжей-тегжейлі қайта жасайды.
                    </p> 
                    

                    <p>Фотосуреттер, жиһаздар, құжаттар және тіпті жауап алу бөлмесі келушілерді уақыт машинасы сияқты ғасырға қайтарады. Сондай-ақ ауылда Алаш саябағы бар, оның аумағында Алаш-Орда қозғалысының көсеміне арналған ескерткіш бар.</p>



        </div><!-- /.container -->
    </section>


<!-- IMAGE GALLERY-->
<div class="container">
<div class="containergallery">

    <div class="gallery">

        <div class="gallery-item">
            <img class="gallery-image" src="https://zhaikpress.kz/wp-content/oraloniri/news/img/2019/07/muzei-alashordy-2.jpg" >
        </div>

        <div class="gallery-item">
            <img class="gallery-image" src="https://zhaikpress.kz/wp-content/oraloniri/news/img/2019/07/muzei-alashordy-3.jpg" >
        </div>

        <div class="gallery-item">
            <img class="gallery-image" src="https://zhaikpress.kz/wp-content/oraloniri/news/img/2019/07/muzei-alashordy-1.jpg" >
        </div>

        <div class="gallery-item">
            <img class="gallery-image" src="https://zhaikpress.kz/wp-content/oraloniri/news/img/2019/07/alash-alleiasy.jpg" >
        </div>

        <div class="gallery-item">
            <img class="gallery-image" src="https://el.kz/upload/storage_el/ef/ef8e963843c08ced9ee1d3f49c50f912.jpg" >
        </div>

        <div class="gallery-item">
            <img class="gallery-image" src="https://sun9-21.userapi.com/impg/VpoKNu7wWkfNbDZYepcqDmpqKQI_QdXftnxw9w/DSU2_cM313o.jpg?size=1280x960&quality=96&sign=3ba845bdb6a0f862f1c83130524ecd52&type=album" >
        </div>
         <div class="gallery-item">
            <img class="gallery-image" src="https://psv4.userapi.com/c237331/u549482705/docs/d8/d9d6a1186c36/pravda.jpg?extra=tIbQ-j6voomZO9uIBULeEmst0mYY4g20FyhnxP6ApNr1U-3rDwoM0vonrblZcfJqYhuma68ApbQ2k-YHr6l4DfqusRztTXKHxmpZEm-OO_z09X7MR7qYbLJWToJv-ZhQP5V9wGLRDpjJjdhQIDQ-_ZNd" >
        </div>
         <div class="gallery-item">
            <img class="gallery-image" src="https://psv4.userapi.com/c237331/u549482705/docs/d14/6cbe8416c865/photo_2022-01-19_21-31-05.jpg?extra=R8u-ay_jt9Glsip2kTt6aKe8ics66BjPOD3XJvWq4x4F0SODQxgWhTJ-sbq-IpwJBju7xGv_Pw7uLj3xDCoehnGZY98r0Ldg6rDZLoyXrtKDB6d-TTEd8_T1aabb3LT7_ooM5TRiTneaZdryivL40K2F" >
        </div>
         <div class="gallery-item">
            <img class="gallery-image" src="https://psv4.userapi.com/c237331/u549482705/docs/d49/2cdc46770080/photo_2022-01-19_21-31-15.jpg?extra=lxa33PYL2VDz__yslucYZi-ON3xFISvBlm4nuU0pp_hFqhrDYoX-G3D4P4ekSunSw7prmG7YJYLfCkW3kUKBCyo3tVJaMDmw8JIxcpIkGUXVhfcIDkhCGkzRWRu21kPybIOnOfO3iVoYzaINbCEQeLBV" >
        </div>


    </div>
<hr>
                        <ul>
                         <li>Заведующий музея - Ойшыбаева Айнагуль Магауиновна.</li>
                         <li>Адрес: Сырымский район, пос. Джампита.</li>
                         <li>Телефон: 8-711-34-31-332.</li>
                       </ul>
<hr>
</div>
</div>



<section class="footer">
        <p><font face="Montserrat">made with <i class="fa fa-heart-o"></i> by team Samyryq</font></p>
</section>


</div><!-- /.page -->



<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
<script>
  class StickyNavigation {
    
    constructor() {
        this.currentId = null;
        this.currentTab = null;
        this.tabContainerHeight = 70;
        let self = this;
        $('.nav').click(function() { 
            self.onTabClick(event, $(this)); 
        });
        $(window).scroll(() => { this.onScroll(); });
        $(window).resize(() => { this.onResize(); });
    }
    
    onTabClick(event, element) {
        event.preventDefault();
        let scrollTop = $(element.attr('href')).offset().top - this.tabContainerHeight + 1;
        $('html, body').animate({ scrollTop: scrollTop }, 600);
    }
    
    onScroll() {
        this.checkTabContainerPosition();
    this.findCurrentTabSelector();
    }
    
    onResize() {
        if(this.currentId) {
            this.setSliderCss();
        }
    }
    
    checkTabContainerPosition() {
        let offset = $('.et-hero-tabs').offset().top + $('.et-hero-tabs').height() - this.tabContainerHeight;
        if($(window).scrollTop() > offset) {
            $('.et-hero-tabs-container').addClass('et-hero-tabs-container--top');
        } 
        else {
            $('.et-hero-tabs-container').removeClass('et-hero-tabs-container--top');
        }
    }
    
    findCurrentTabSelector(element) {
        let newCurrentId;
        let newCurrentTab;
        let self = this;
        $('.et-hero-tab').each(function() {
            let id = $(this).attr('href');
            let offsetTop = $(id).offset().top - self.tabContainerHeight;
            let offsetBottom = $(id).offset().top + $(id).height() - self.tabContainerHeight;
            if($(window).scrollTop() > offsetTop && $(window).scrollTop() < offsetBottom) {
                newCurrentId = id;
                newCurrentTab = $(this);
            }
        });
        if(this.currentId != newCurrentId || this.currentId === null) {
            this.currentId = newCurrentId;
            this.currentTab = newCurrentTab;
            this.setSliderCss();
        }
    }
    
    setSliderCss() {
        let width = 0;
        let left = 0;
        if(this.currentTab) {
            width = this.currentTab.css('width');
            left = this.currentTab.offset().left;
        }
        $('.et-hero-tab-slider').css('width', width);
        $('.et-hero-tab-slider').css('left', left);
    }
    
}

new StickyNavigation();


"use strict";

$(() => {
  let stickyTop = 0,
      scrollTarget = false;
  let timeline = $('.timeline__nav'),
      items = $('li', timeline),
      milestones = $('.timeline__section .milestone'),
      offsetTop = parseInt(timeline.css('top'));
  const TIMELINE_VALUES = {
    start: 190,
    step: 30
  };
  $(window).resize(function () {
    timeline.removeClass('fixed');
    stickyTop = timeline.offset().top - offsetTop;
    $(window).trigger('scroll');
  }).trigger('resize');
  $(window).scroll(function () {
    if ($(window).scrollTop() > stickyTop) {
      timeline.addClass('fixed');
    } else {
      timeline.removeClass('fixed');
    }
  }).trigger('scroll');
  items.find('span').click(function () {
    let li = $(this).parent(),
        index = li.index(),
        milestone = milestones.eq(index);

    if (!li.hasClass('active') && milestone.length) {
      scrollTarget = index;
      let scrollTargetTop = milestone.offset().top - 80;
      $('html, body').animate({
        scrollTop: scrollTargetTop
      }, {
        duration: 400,
        complete: function complete() {
          scrollTarget = false;
        }
      });
    }
  });
  $(window).scroll(function () {
    let viewLine = $(window).scrollTop() + $(window).height() / 3,
        active = -1;

    if (scrollTarget === false) {
      milestones.each(function () {
        if ($(this).offset().top - viewLine > 0) {
          return false;
        }

        active++;
      });
    } else {
      active = scrollTarget;
    }

    timeline.css('top', -1 * active * TIMELINE_VALUES.step + TIMELINE_VALUES.start + 'px');
    items.filter('.active').removeClass('active');
    items.eq(active != -1 ? active : 0).addClass('active');
  }).trigger('scroll');
});


jQuery(document).ready(function($){
    var timelines = $('.cd-horizontal-timeline'),
        eventsMinDistance = 60;

    (timelines.length > 0) && initTimeline(timelines);

    function initTimeline(timelines) {
        timelines.each(function(){
            var timeline = $(this),
                timelineComponents = {};
            //cache timeline components 
            timelineComponents['timelineWrapper'] = timeline.find('.events-wrapper');
            timelineComponents['eventsWrapper'] = timelineComponents['timelineWrapper'].children('.events');
            timelineComponents['fillingLine'] = timelineComponents['eventsWrapper'].children('.filling-line');
            timelineComponents['timelineEvents'] = timelineComponents['eventsWrapper'].find('a');
            timelineComponents['timelineDates'] = parseDate(timelineComponents['timelineEvents']);
            timelineComponents['eventsMinLapse'] = minLapse(timelineComponents['timelineDates']);
            timelineComponents['timelineNavigation'] = timeline.find('.cd-timeline-navigation');
            timelineComponents['eventsContent'] = timeline.children('.events-content');

            //assign a left postion to the single events along the timeline
            setDatePosition(timelineComponents, eventsMinDistance);
            //assign a width to the timeline
            var timelineTotWidth = setTimelineWidth(timelineComponents, eventsMinDistance);
            //the timeline has been initialize - show it
            timeline.addClass('loaded');

            //detect click on the next arrow
            timelineComponents['timelineNavigation'].on('click', '.next', function(event){
                event.preventDefault();
                updateSlide(timelineComponents, timelineTotWidth, 'next');
            });
            //detect click on the prev arrow
            timelineComponents['timelineNavigation'].on('click', '.prev', function(event){
                event.preventDefault();
                updateSlide(timelineComponents, timelineTotWidth, 'prev');
            });
            //detect click on the a single event - show new event content
            timelineComponents['eventsWrapper'].on('click', 'a', function(event){
                event.preventDefault();
                timelineComponents['timelineEvents'].removeClass('selected');
                $(this).addClass('selected');
                updateOlderEvents($(this));
                updateFilling($(this), timelineComponents['fillingLine'], timelineTotWidth);
                updateVisibleContent($(this), timelineComponents['eventsContent']);
            });

            //on swipe, show next/prev event content
            timelineComponents['eventsContent'].on('swipeleft', function(){
                var mq = checkMQ();
                ( mq == 'mobile' ) && showNewContent(timelineComponents, timelineTotWidth, 'next');
            });
            timelineComponents['eventsContent'].on('swiperight', function(){
                var mq = checkMQ();
                ( mq == 'mobile' ) && showNewContent(timelineComponents, timelineTotWidth, 'prev');
            });

            //keyboard navigation
            $(document).keyup(function(event){
                if(event.which=='37' && elementInViewport(timeline.get(0)) ) {
                    showNewContent(timelineComponents, timelineTotWidth, 'prev');
                } else if( event.which=='39' && elementInViewport(timeline.get(0))) {
                    showNewContent(timelineComponents, timelineTotWidth, 'next');
                }
            });
        });
    }

    function updateSlide(timelineComponents, timelineTotWidth, string) {
        //retrieve translateX value of timelineComponents['eventsWrapper']
        var translateValue = getTranslateValue(timelineComponents['eventsWrapper']),
            wrapperWidth = Number(timelineComponents['timelineWrapper'].css('width').replace('px', ''));
        //translate the timeline to the left('next')/right('prev') 
        (string == 'next') 
            ? translateTimeline(timelineComponents, translateValue - wrapperWidth + eventsMinDistance, wrapperWidth - timelineTotWidth)
            : translateTimeline(timelineComponents, translateValue + wrapperWidth - eventsMinDistance);
    }

    function showNewContent(timelineComponents, timelineTotWidth, string) {
        //go from one event to the next/previous one
        var visibleContent =  timelineComponents['eventsContent'].find('.selected'),
            newContent = ( string == 'next' ) ? visibleContent.next() : visibleContent.prev();

        if ( newContent.length > 0 ) { //if there's a next/prev event - show it
            var selectedDate = timelineComponents['eventsWrapper'].find('.selected'),
                newEvent = ( string == 'next' ) ? selectedDate.parent('li').next('li').children('a') : selectedDate.parent('li').prev('li').children('a');
            
            updateFilling(newEvent, timelineComponents['fillingLine'], timelineTotWidth);
            updateVisibleContent(newEvent, timelineComponents['eventsContent']);
            newEvent.addClass('selected');
            selectedDate.removeClass('selected');
            updateOlderEvents(newEvent);
            updateTimelinePosition(string, newEvent, timelineComponents, timelineTotWidth);
        }
    }

    function updateTimelinePosition(string, event, timelineComponents, timelineTotWidth) {
        //translate timeline to the left/right according to the position of the selected event
        var eventStyle = window.getComputedStyle(event.get(0), null),
            eventLeft = Number(eventStyle.getPropertyValue("left").replace('px', '')),
            timelineWidth = Number(timelineComponents['timelineWrapper'].css('width').replace('px', '')),
            timelineTotWidth = Number(timelineComponents['eventsWrapper'].css('width').replace('px', ''));
        var timelineTranslate = getTranslateValue(timelineComponents['eventsWrapper']);

        if( (string == 'next' && eventLeft > timelineWidth - timelineTranslate) || (string == 'prev' && eventLeft < - timelineTranslate) ) {
            translateTimeline(timelineComponents, - eventLeft + timelineWidth/2, timelineWidth - timelineTotWidth);
        }
    }

    function translateTimeline(timelineComponents, value, totWidth) {
        var eventsWrapper = timelineComponents['eventsWrapper'].get(0);
        value = (value > 0) ? 0 : value; //only negative translate value
        value = ( !(typeof totWidth === 'undefined') &&  value < totWidth ) ? totWidth : value; //do not translate more than timeline width
        setTransformValue(eventsWrapper, 'translateX', value+'px');
        //update navigation arrows visibility
        (value == 0 ) ? timelineComponents['timelineNavigation'].find('.prev').addClass('inactive') : timelineComponents['timelineNavigation'].find('.prev').removeClass('inactive');
        (value == totWidth ) ? timelineComponents['timelineNavigation'].find('.next').addClass('inactive') : timelineComponents['timelineNavigation'].find('.next').removeClass('inactive');
    }

    function updateFilling(selectedEvent, filling, totWidth) {
        //change .filling-line length according to the selected event
        var eventStyle = window.getComputedStyle(selectedEvent.get(0), null),
            eventLeft = eventStyle.getPropertyValue("left"),
            eventWidth = eventStyle.getPropertyValue("width");
        eventLeft = Number(eventLeft.replace('px', '')) + Number(eventWidth.replace('px', ''))/2;
        var scaleValue = eventLeft/totWidth;
        setTransformValue(filling.get(0), 'scaleX', scaleValue);
    }

    function setDatePosition(timelineComponents, min) {
        for (i = 0; i < timelineComponents['timelineDates'].length; i++) { 
            var distance = daydiff(timelineComponents['timelineDates'][0], timelineComponents['timelineDates'][i]),
                distanceNorm = Math.round(distance/timelineComponents['eventsMinLapse']) + 2;
            timelineComponents['timelineEvents'].eq(i).css('left', distanceNorm*min+'px');
        }
    }

    function setTimelineWidth(timelineComponents, width) {
        var timeSpan = daydiff(timelineComponents['timelineDates'][0], timelineComponents['timelineDates'][timelineComponents['timelineDates'].length-1]),
            timeSpanNorm = timeSpan/timelineComponents['eventsMinLapse'],
            timeSpanNorm = Math.round(timeSpanNorm) + 4,
            totalWidth = timeSpanNorm*width;
        timelineComponents['eventsWrapper'].css('width', totalWidth+'px');
        updateFilling(timelineComponents['timelineEvents'].eq(0), timelineComponents['fillingLine'], totalWidth);
    
        return totalWidth;
    }

    function updateVisibleContent(event, eventsContent) {
        var eventDate = event.data('date'),
            visibleContent = eventsContent.find('.selected'),
            selectedContent = eventsContent.find('[data-date="'+ eventDate +'"]'),
            selectedContentHeight = selectedContent.height();

        if (selectedContent.index() > visibleContent.index()) {
            var classEnetering = 'selected enter-right',
                classLeaving = 'leave-left';
        } else {
            var classEnetering = 'selected enter-left',
                classLeaving = 'leave-right';
        }

        selectedContent.attr('class', classEnetering);
        visibleContent.attr('class', classLeaving).one('webkitAnimationEnd oanimationend msAnimationEnd animationend', function(){
            visibleContent.removeClass('leave-right leave-left');
            selectedContent.removeClass('enter-left enter-right');
        });
        eventsContent.css('height', selectedContentHeight+'px');
    }

    function updateOlderEvents(event) {
        event.parent('li').prevAll('li').children('a').addClass('older-event').end().end().nextAll('li').children('a').removeClass('older-event');
    }

    function getTranslateValue(timeline) {
        var timelineStyle = window.getComputedStyle(timeline.get(0), null),
            timelineTranslate = timelineStyle.getPropertyValue("-webkit-transform") ||
                timelineStyle.getPropertyValue("-moz-transform") ||
                timelineStyle.getPropertyValue("-ms-transform") ||
                timelineStyle.getPropertyValue("-o-transform") ||
                timelineStyle.getPropertyValue("transform");

        if( timelineTranslate.indexOf('(') >=0 ) {
            var timelineTranslate = timelineTranslate.split('(')[1];
            timelineTranslate = timelineTranslate.split(')')[0];
            timelineTranslate = timelineTranslate.split(',');
            var translateValue = timelineTranslate[4];
        } else {
            var translateValue = 0;
        }

        return Number(translateValue);
    }

    function setTransformValue(element, property, value) {
        element.style["-webkit-transform"] = property+"("+value+")";
        element.style["-moz-transform"] = property+"("+value+")";
        element.style["-ms-transform"] = property+"("+value+")";
        element.style["-o-transform"] = property+"("+value+")";
        element.style["transform"] = property+"("+value+")";
    }

    //based on http://stackoverflow.com/questions/542938/how-do-i-get-the-number-of-days-between-two-dates-in-javascript
    function parseDate(events) {
        var dateArrays = [];
        events.each(function(){
            var dateComp = $(this).data('date').split('/'),
                newDate = new Date(dateComp[2], dateComp[1]-1, dateComp[0]);
            dateArrays.push(newDate);
        });
        return dateArrays;
    }

    function parseDate2(events) {
        var dateArrays = [];
        events.each(function(){
            var singleDate = $(this),
                dateComp = singleDate.data('date').split('T');
            if( dateComp.length > 1 ) { //both DD/MM/YEAR and time are provided
                var dayComp = dateComp[0].split('/'),
                    timeComp = dateComp[1].split(':');
            } else if( dateComp[0].indexOf(':') >=0 ) { //only time is provide
                var dayComp = ["2000", "0", "0"],
                    timeComp = dateComp[0].split(':');
            } else { //only DD/MM/YEAR
                var dayComp = dateComp[0].split('/'),
                    timeComp = ["0", "0"];
            }
            var newDate = new Date(dayComp[2], dayComp[1]-1, dayComp[0], timeComp[0], timeComp[1]);
            dateArrays.push(newDate);
        });
        return dateArrays;
    }

    function daydiff(first, second) {
        return Math.round((second-first));
    }

    function minLapse(dates) {
        //determine the minimum distance among events
        var dateDistances = [];
        for (i = 1; i < dates.length; i++) { 
            var distance = daydiff(dates[i-1], dates[i]);
            dateDistances.push(distance);
        }
        return Math.min.apply(null, dateDistances);
    }

    /*
        How to tell if a DOM element is visible in the current viewport?
        http://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport
    */
    function elementInViewport(el) {
        var top = el.offsetTop;
        var left = el.offsetLeft;
        var width = el.offsetWidth;
        var height = el.offsetHeight;

        while(el.offsetParent) {
            el = el.offsetParent;
            top += el.offsetTop;
            left += el.offsetLeft;
        }

        return (
            top < (window.pageYOffset + window.innerHeight) &&
            left < (window.pageXOffset + window.innerWidth) &&
            (top + height) > window.pageYOffset &&
            (left + width) > window.pageXOffset
        );
    }

    function checkMQ() {
        //check if mobile or desktop device
        return window.getComputedStyle(document.querySelector('.cd-horizontal-timeline'), '::before').getPropertyValue('content').replace(/'/g, "").replace(/"/g, "");
    }
});
</script>


</body>
</html>
